
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>pquery &#8212; pkgcore trunk documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer Notes" href="../dev-notes.html" />
    <link rel="prev" title="pplugincache - plugin cache update utility" href="pplugincache.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../dev-notes.html" title="Developer Notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pplugincache.html" title="pplugincache - plugin cache update utility"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pkgcore trunk documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../man.html" accesskey="U">Man Pages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pquery</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="pquery">
<h1>pquery<a class="headerlink" href="#pquery" title="Permalink to this heading">¶</a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this heading">¶</a></h2>
<p>pquery [-h] [--version] [--debug] [-q] [-v] [--color BOOLEAN] [--config CONFIG_PATH] [--domain DOMAIN] [--raw] [--unfiltered] [--virtuals {only,disable}] [-r REPO | -E | -B | -I | -A] [--all] [--has-use has_use] [--license license] [--revdep REVDEP] [--revdep-pkgs REVDEP_PKGS] [--restrict-revdep restrict_revdep] [--restrict-revdep-pkgs restrict_revdep_pkgs] [-S description] [--eapi eapi] [--owns owns] [--owns-re owns_re] [--maintainer maintainer] [--maintainer-name maintainer_name] [--maintainer-email maintainer_email] [--environment environment] [--pkgset pkgset] [-u] [-1] [-a] [--cpv] [-R] [--slot] [-n | --min | --max] [--blame] [--size] [--contents] [--highlight-dep HIGHLIGHT_DEP] [--print-revdep PRINT_REVDEP] [--attr attribute] [--force-attr attribute] [--one-attr attribute | --force-one-attr attribute] [TARGET ...]</p>
</section>
<section id="base-options">
<h2>Base Options<a class="headerlink" href="#base-options" title="Permalink to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">--version</span></kbd></dt>
<dd><p>show this program's version info and exit</p>
</dd>
<dt><kbd><span class="option">--debug</span></kbd></dt>
<dd><p>enable debugging checks</p>
</dd>
<dt><kbd><span class="option">-q</span>, <span class="option">--quiet</span></kbd></dt>
<dd><p>suppress non-error messages</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>show verbose output</p>
</dd>
<dt><kbd><span class="option">--color <var>BOOLEAN</var></span></kbd></dt>
<dd><p>enable/disable color support</p>
</dd>
</dl>
</section>
<section id="config-options">
<h2>Config Options<a class="headerlink" href="#config-options" title="Permalink to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd><span class="option">--config <var>CONFIG_PATH</var></span></kbd></dt>
<dd><p>use custom config or skip loading system config</p>
</dd>
<dt><kbd><span class="option">--domain <var>DOMAIN</var></span></kbd></dt>
<dd><p>custom pkgcore domain to use for this operation</p>
</dd>
</dl>
</section>
<section id="repository-matching-options">
<h2>Repository Matching Options<a class="headerlink" href="#repository-matching-options" title="Permalink to this heading">¶</a></h2>
<p>options controlling which repos to inspect</p>
<dl class="option-list">
<dt><kbd><span class="option">--raw</span></kbd></dt>
<dd><p>disable configuration filtering</p>
</dd>
<dt><kbd><span class="option">--unfiltered</span></kbd></dt>
<dd><p>disable all license and visibility filtering</p>
</dd>
</dl>
<dl class="simple">
<dt>--virtuals {only,disable}</dt><dd><p>only match virtuals or disable virtuals matching entirely</p>
</dd>
</dl>
<dl class="option-list">
<dt><kbd><span class="option">-r <var>REPO</var></span>, <span class="option">--repo <var>REPO</var></span></kbd></dt>
<dd><p>repo to search (default from domain if omitted)</p>
</dd>
<dt><kbd><span class="option">-E</span>, <span class="option">--ebuild-repos</span></kbd></dt>
<dd><p>search all ebuild repos</p>
</dd>
<dt><kbd><span class="option">-B</span>, <span class="option">--binary-repos</span></kbd></dt>
<dd><p>search all binary repos</p>
</dd>
<dt><kbd><span class="option">-I</span>, <span class="option">--installed</span></kbd></dt>
<dd><p>search installed packages</p>
</dd>
<dt><kbd><span class="option">-A</span>, <span class="option">--all-repos</span></kbd></dt>
<dd><p>search all repos</p>
</dd>
</dl>
</section>
<section id="package-matching-options">
<h2>Package Matching Options<a class="headerlink" href="#package-matching-options" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>TARGET</dt><dd><p>extended atom matching of pkgs</p>
</dd>
</dl>
<dl class="option-list">
<dt><kbd><span class="option">--all</span></kbd></dt>
<dd><p>match all packages</p>
</dd>
<dt><kbd><span class="option">--has-use <var>has_use</var></span></kbd></dt>
<dd><p>exact string match on a USE flag</p>
</dd>
<dt><kbd><span class="option">--license <var>license</var></span></kbd></dt>
<dd><p>exact match on a license</p>
</dd>
<dt><kbd><span class="option">--revdep <var>REVDEP</var></span></kbd></dt>
<dd><p>shorthand for --restrict-revdep atom --print-revdep atom</p>
</dd>
<dt><kbd><span class="option">--revdep-pkgs <var>REVDEP_PKGS</var></span></kbd></dt>
<dd><p>shorthand for --restrict-revdep-pkgs atom --print-revdep atom</p>
</dd>
<dt><kbd><span class="option">--restrict-revdep <var>restrict_revdep</var></span></kbd></dt>
<dd><p>dependency on an atom</p>
</dd>
<dt><kbd><span class="option">--restrict-revdep-pkgs <var>restrict_revdep_pkgs</var></span></kbd></dt>
<dd><p>dependency on pkgs that match a specific atom</p>
</dd>
<dt><kbd><span class="option">-S <var>description</var></span>, <span class="option">--description <var>description</var></span></kbd></dt>
<dd><p>regexp search on description and longdescription</p>
</dd>
<dt><kbd><span class="option">--eapi <var>eapi</var></span></kbd></dt>
<dd><p>match packages using a given EAPI</p>
</dd>
<dt><kbd><span class="option">--owns <var>owns</var></span></kbd></dt>
<dd><p>exact match on an owned file/dir</p>
</dd>
<dt><kbd><span class="option">--owns-re <var>owns_re</var></span></kbd></dt>
<dd><p>like &quot;owns&quot; but using a regexp for matching</p>
</dd>
<dt><kbd><span class="option">--maintainer <var>maintainer</var></span></kbd></dt>
<dd><p>comma-separated list of regexes to search for maintainers</p>
</dd>
<dt><kbd><span class="option">--maintainer-name <var>maintainer_name</var></span></kbd></dt>
<dd><p>comma-separated list of maintainer name regexes to search for</p>
</dd>
<dt><kbd><span class="option">--maintainer-email <var>maintainer_email</var></span></kbd></dt>
<dd><p>comma-separated list of maintainer email regexes to search for</p>
</dd>
<dt><kbd><span class="option">--environment <var>environment</var></span></kbd></dt>
<dd><p>regexp search in environment.bz2</p>
</dd>
<dt><kbd><span class="option">--pkgset <var>pkgset</var></span></kbd></dt>
<dd><p>find packages that match the given package set (world for example)</p>
</dd>
<dt><kbd><span class="option">-u</span>, <span class="option">--upgrade</span></kbd></dt>
<dd><p>match installed packages without best slotted version</p>
</dd>
</dl>
</section>
<section id="output-options">
<h2>Output Options<a class="headerlink" href="#output-options" title="Permalink to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd><span class="option">-1</span>, <span class="option">--first</span></kbd></dt>
<dd><p>stop when first match is found</p>
</dd>
<dt><kbd><span class="option">-a</span>, <span class="option">--atom</span></kbd></dt>
<dd><p>print =cat/pkg-3 instead of cat/pkg-3.</p>
</dd>
<dt><kbd><span class="option">--cpv</span></kbd></dt>
<dd><p>print the category/package-version</p>
</dd>
<dt><kbd><span class="option">-R</span></kbd></dt>
<dd><p>print the repo of the package</p>
</dd>
<dt><kbd><span class="option">--slot</span></kbd></dt>
<dd><p>print the slot of the package</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--no-version</span></kbd></dt>
<dd><p>collapse multiple matching versions together</p>
</dd>
<dt><kbd><span class="option">--min</span></kbd></dt>
<dd><p>show only the lowest version for each package</p>
</dd>
<dt><kbd><span class="option">--max</span></kbd></dt>
<dd><p>show only the highest version for each package</p>
</dd>
<dt><kbd><span class="option">--blame</span></kbd></dt>
<dd><p>shorthand for --attr maintainers</p>
</dd>
<dt><kbd><span class="option">--size</span></kbd></dt>
<dd><p>display size of all files owned by the package</p>
</dd>
<dt><kbd><span class="option">--contents</span></kbd></dt>
<dd><p>list files owned by the package</p>
</dd>
<dt><kbd><span class="option">--highlight-dep <var>HIGHLIGHT_DEP</var></span></kbd></dt>
<dd><p>highlight dependencies matching this atom</p>
</dd>
<dt><kbd><span class="option">--print-revdep <var>PRINT_REVDEP</var></span></kbd></dt>
<dd><p>print what condition(s) trigger a dep</p>
</dd>
<dt><kbd><span class="option">--attr <var>attribute</var></span></kbd></dt>
<dd><p>print this attribute's value (can be specified more than once)</p>
</dd>
<dt><kbd><span class="option">--force-attr <var>attribute</var></span></kbd></dt>
<dd><p>like --attr but accepts any string as attribute name instead of only explicitly supported names</p>
</dd>
<dt><kbd><span class="option">--one-attr <var>attribute</var></span></kbd></dt>
<dd><p>print one attribute, suppresses other output</p>
</dd>
<dt><kbd><span class="option">--force-one-attr <var>attribute</var></span></kbd></dt>
<dd><p>like --one-attr but accepts any string as attribute name instead of only explicitly supported names</p>
</dd>
</dl>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>Another switch that could do with some extra explanation is <code class="docutils literal notranslate"><span class="pre">--raw</span></code>.
Specifying <code class="docutils literal notranslate"><span class="pre">--raw</span></code> makes your configuration not affect the results. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pquery --attr alldepends sys-apps/dbus --max -v
* sys-apps/dbus-0.62-r1
    description: A message bus system, a simple way for applications to talk
                 to each other
    homepage: http://dbus.freedesktop.org/
    depends: &gt;=dev-libs/glib-2.6 || ( ( x11-libs/libXt x11-libs/libX11 )
                 virtual/x11 ) &gt;=x11-libs/gtk+-2.6 &gt;=dev-lang/python-2.4
                 &gt;=dev-python/pyrex-0.9.3-r2 &gt;=dev-libs/expat-1.95.8
                 dev-util/pkgconfig sys-devel/automake
                 &gt;=sys-devel/autoconf-2.59 sys-devel/libtool
    rdepends: &gt;=dev-libs/glib-2.6 || ( ( x11-libs/libXt x11-libs/libX11 )
                 virtual/x11 ) &gt;=x11-libs/gtk+-2.6 &gt;=dev-lang/python-2.4
                 &gt;=dev-python/pyrex-0.9.3-r2 &gt;=dev-libs/expat-1.95.8
    post_rdepends:
</pre></div>
</div>
<p>This is the highest unmasked package on the system. Also notice there are no
references to USE flags or qt in the dependencies. That is because qt is not in
USE for this configuration, so those dependencies do not apply.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pquery --attr alldepends sys-apps/dbus --max -v --raw
* sys-apps/dbus-0.91
    description: Meta package for D-Bus
    homepage: http://dbus.freedesktop.org/
    depends:
    rdepends: &gt;=sys-apps/dbus-core-0.91 python? (
                 &gt;=dev-python/dbus-python-0.71 ) qt3? (
                 &gt;=dev-libs/dbus-qt3-old-0.70 ) gtk? (
                 &gt;=dev-libs/dbus-glib-0.71 ) !&lt;sys-apps/dbus-0.91
    post_rdepends:
</pre></div>
</div>
<p>This version is in <code class="docutils literal notranslate"><span class="pre">package.mask</span></code>, and we can see the use-conditional flags now.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> or <code class="docutils literal notranslate"><span class="pre">-v</span></code> flag tries to print human-readable output (although
some things like the formatting of depend strings need some improvement).
Without <code class="docutils literal notranslate"><span class="pre">-v</span></code> the output is usually a single line per package in a hopefully
machine-parseable format (usable in pipelines). There are some extras like
<code class="docutils literal notranslate"><span class="pre">--atom</span></code> meant for shell pipeline use. If you have some useful shell pipeline
in mind that pquery's output could be better formatted for please open an issue.</p>
<p>Adding short options is planned but there are some features to add first (want
most of the features in place to avoid name clashes).</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Other tool</p></th>
<th class="head"><p>pquery</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">belongs</span> <span class="pre">/bin/ls</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">--owns</span> <span class="pre">/bin/ls</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">check</span></code></p></td>
<td><p>not implemented (yet?)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">depends</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">-I</span> <span class="pre">--revdep</span> <span class="pre">dev-lang/python</span></code></p></td>
<td><p>omitting <code class="docutils literal notranslate"><span class="pre">-I</span></code> makes it equivalent to <code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">depends</span> <span class="pre">-a</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">depgraph</span></code></p></td>
<td><p>not implemented (yet?)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">files</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">--contents</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--contents</span></code> is an output option, can be combined with any restriction</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">hasuse</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">-I</span> <span class="pre">--has-use</span> <span class="pre">python</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">list</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">-I</span> <span class="pre">'*python*'</span></code></p></td>
<td><p>this is in ExtendedAtomSyntax</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">size</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">--size</span> <span class="pre">python</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">equery</span> <span class="pre">uses</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">--attr</span> <span class="pre">use</span> <span class="pre">python</span></code></p></td>
<td><p>less information, but is an output option so mixes with any restriction</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">emerge</span> <span class="pre">-s</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">-vn</span> <span class="pre">'*python*'</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">emerge</span> <span class="pre">-S</span> <span class="pre">python</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">-vnS</span> <span class="pre">python</span></code></p></td>
<td><p>searches through longdescription (from metadata.xml) too</p></td>
</tr>
<tr class="row-odd"><td><p>no equivalent</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">--license</span> <span class="pre">GPL-2</span> <span class="pre">-I</span></code></p></td>
<td><p>list all installed GPL-2 packages</p></td>
</tr>
<tr class="row-even"><td><p>no equivalent</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pquery</span> <span class="pre">--maintainer</span> <span class="pre">radhermit</span></code></p></td>
<td><p>list all packages that are maintained by radhermit</p></td>
</tr>
</tbody>
</table>
<p>It can also do some things equery/emerge do not let you do, like restricting
based on maintainer or herd and printing various other package attributes. See
<code class="docutils literal notranslate"><span class="pre">--help</span></code> for those. If you miss a query open an issue.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">pquery</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#base-options">Base Options</a></li>
<li><a class="reference internal" href="#config-options">Config Options</a></li>
<li><a class="reference internal" href="#repository-matching-options">Repository Matching Options</a></li>
<li><a class="reference internal" href="#package-matching-options">Package Matching Options</a></li>
<li><a class="reference internal" href="#output-options">Output Options</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="pplugincache.html"
                          title="previous chapter">pplugincache - plugin cache update utility</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../dev-notes.html"
                          title="next chapter">Developer Notes</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../dev-notes.html" title="Developer Notes"
             >next</a> |</li>
        <li class="right" >
          <a href="pplugincache.html" title="pplugincache - plugin cache update utility"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pkgcore trunk documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../man.html" >Man Pages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pquery</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2019, pkgcore contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>